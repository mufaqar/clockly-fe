plugins {
    id "com.github.node-gradle.node" version "7.0.1"
}

node {
    download = true
    version = "20.11.1"
}

tasks.register('npmBuild', NpxTask) {
    dependsOn npmInstall
    command = 'next'
    args = [ 'build' , '--debug']
    inputs.files('.env.development', '.env.production', 'package.json', 'package-lock.json', 'next.config.js', 'postcss.config.js', 'tailwind.config.ts', 'tsconfig.json')
    inputs.dir('app')
    inputs.dir('components')
    inputs.dir('lib')
    inputs.dir(fileTree("node_modules").exclude(".cache"))
    outputs.dir('dist')
}